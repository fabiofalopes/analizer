Neste vÃ­deo vamos melhorar um bocadinho o nosso controlador ele neste momento jÃ¡ funciona perfeitamente isto reage aqui a estes botÃµes Isto Ã© atualizado automaticamente jÃ¡ Vimos que isto Ã© apenas refrescado apenas estes Twitch sem afetar os outros portanto estÃ¡ tudo direitinho o que Ã© que se pode ainda melhorar nesta aplicaÃ§Ã£o bem voltando aqui a este estado da aplicaÃ§Ã£o jÃ¡ tÃ­nhamos visto que este 25 na realidade deve ser uma variÃ¡vel e essa variÃ¡vel deve-se deve afetar deve ser afetada por estes botÃµes e ela constitui o estado da aplicaÃ§Ã£o no entanto o sÃ­tio Onde nÃ³s estamos a gerir esse estado ainda nÃ£o estÃ¡ bem nÃ³s estamos a gerir o estado da aplicaÃ§Ã£o dentro do prÃ³prio widget ou seja estamos a misturar um bocadinho e interface grÃ¡fica com aquilo que se chama a lÃ³gica de negÃ³cio ou a lÃ³gica da aplicaÃ§Ã£o EntÃ£o idealmente o que a gente gostaria era de isolar Ã© este comportamento numa classe prÃ³pria podia ser por exemplo controlador AC que lÃ¡ dentro tem uma variÃ¡vel temperatura e atÃ© inclusivamente tem mÃ©todos para aumentar e diminuir essa temperatura e todo o resto que nos lembramos mais tarde mas do fundo tornar isto numa classe digamos independente da interface grÃ¡fica EntÃ£o Ã© isso que vamos fazer agora Vamos criar entÃ£o aqui um novo ficheiro no qual vamos criar uma classe controlador AC vamos dizer que ela tem uma temperatura e agora podemos criar jÃ¡ um Construtor com isso e vamos dizer tambÃ©m que tem um bule aumenta porque Ã© bullying porque eventualmente nÃ³s nÃ£o vamos conseguir aumentar a temperatura para sempre nÃ© Ã© um controlador certa altura quando nÃ³s tentamos aumentar mais a temperatura ele vai parar de aumentar entÃ£o este bolo pode ser usado para retornar true ou falso nÃ³s conseguimos aumentar ou nÃ£o a temperatura para jÃ¡ nÃ£o vamos preocuparmos com isso vamos simplesmente fazer temperatura mais mais e retorno conseguimos aumentar a temperatura vamos fazer o mesmo para o diminui agora que temos esta classe podemos chegar aqui ao a nossa ao nosso controlador e acabar com este temperatura que aqui estÃ¡ para passar a ter um controlador a ser que Ã© o nosso falta em Portugal Ã© o nosso controlador a ser e agora Ã© inicializado desta forma ou seja atravÃ©s de um Construtor pronto claro que uma vez que alteramos isto muda nÃ£o Ã© portanto isto passa a ser controladora a ser ponto Ela tÃ¡ aqui a chavetas ele nÃ£o estÃ¡ a fazer auto-complete porque isto tem que estar dentro de chavetas Ok e aqui o 7 jÃ¡ passa a ser controlador a ser ponto aumenta nÃ£o diminui Claro neste caso e ponto aumenta finalmente aqui outra vez cai vamos ver se tÃ¡ tudo a funcionar Ok continua tudo a funcionar lindamente mas agora isolado num numa classe o bem o que Ã© que nÃ³s ganhamos com isto ganhamos para jÃ¡ que agora Ã© relativamente fÃ¡cil eu comeÃ§ar a acrescentar validaÃ§Ãµes limitaÃ§Ãµes constrangimentos que nÃ£o deviam estar misturados dentro desta lÃ³gica que estÃ¡ neste ser que Ã© apenas de interface grÃ¡fica mas sim dentro disto Ou seja eu agora posso fazer uma coisa deste ano e a temperatura Ã© menor que 40 jÃ¡ 40 Ã© o mÃ¡ximo que o quanto o ar condicionado aguenta entÃ£o vamos permitir aquela aumente mas fora disso Vamos retomar falso e nÃ£o Vamos aumentar nÃ£o automaticamente nÃ£o vamos conseguir aumentar a palavra 40 estÃ£o a ver nÃ³s agora inclusivamente como estamos a retornar um bule anualmente nÃ³s podÃ­amos apanhar esse retorno e dar um alerta utilizador a dizer atingiu o mÃ¡ximo da temperatura ou nÃ£o Ã© possÃ­vel fazer essa operaÃ§Ã£o qualquer coisa deste centro finalmente alÃ©m de termos podemos Meter aqui esta lÃ³gica podemos testar atravÃ©s destes unitÃ¡rios facilmente esta classe ao contrÃ¡rio das classes interface grÃ¡fica que sÃ£o difÃ­ceis de testar nÃ£o sÃ£o impossÃ­veis Ã  maneira de testar mas aÃ­ que temos que simular cliques simula que eu clique naquele botÃ£o agora verifica como Ã© que ficou Isto Ã© bastante mais complicado de estar aqui nÃ³s podemos simplesmente estar por exemplo que a esta classe nÃ£o deixa que a temperatura sobe para cima de 40 Graus como Ã© que vamos fazer isso temos aqui um teste eu vou apagar este teste EntÃ£o tÃ¡ aqui a fazer nada e vou criar um teste novo chamado controlador a ser teste porque porque eu vou testar o controlador assim e vou jÃ¡ criar aqui o nosso teste um dos Testes vou explicar muito rapidamente temos uma funÃ§Ã£o mÃ£e que lÃ¡ dentro tem esta funÃ§Ã£o teste que recebe uma explicaÃ§Ã£o do que Ã© que o texto vai fazer o que Ã© que este cenÃ¡rio vai testar e depois dentro deste bloco recebe aquilo que o teste propriamente dito isto Ã© parecido com aquilo que vocÃªs jÃ¡ sabem de Jay Unity neste caso eu estou simplesmente a instanciar um objeto controlador AC com a temperatura 20 e a seguir verificar que a temperatura Ã© realmente 20 esta Ã© que se pede ela equivalente ao certo e com eles do jaironito vamos como Ã© que podemos correr este teste Ã© sÃ³ fazer isto assim ele corre todos os testes Ok passou temos a certeza que ele nÃ£o passou por acaso vamos correr novamente agora com um erro Ok falhou tava Ã  espera 19 e foi 20 Este Ã© o Ã© output Standard vocÃªs estÃ£o habituados do G8 aqui tambÃ©m se aplica entÃ£o Se quisermos fazer um novo teste para a funÃ§Ã£o aumenta do controlador nÃ³s poderÃ­amos fazer desta forma mais uma vez Vamos criar aqui um controlador agora vamos aumentÃ¡-lo e vamos verificar que a temperatura passou a 21 podemos correÃ§Ãµes de teste ok temos tambÃ©m verificar fazer um outro teste que Ã© nÃ£o aumenta para sempre e vamos fazer aqui um ciclo vamos pÃ´r a si mesmo sem vezes nÃ£o interessa em que ele vai tentar aumentar a temperatura 100 vezes e vamos verificar que no final ele vai ter um 40 Pronto agora sim temos a aplicaÃ§Ã£o bem desenhada a lÃ³gica de negÃ³cio estÃ¡ isolada de interface grÃ¡fica estamos a testar este contexto sanitÃ¡rios apenas se refrescam aquilo que sÃ£o necessÃ¡rios ou seja este vÃ­deo fresca sozinho e estes dois em conjunto manipulam este objeto controla a ser esta classe controlar assim para produzir este efeito e com isto termina este curso este mini curso sobre o widget
