Neste vÃ­deo vou mostrar como implementar navegaÃ§Ã£o entre vÃ¡rias pÃ¡ginas numa aplicaÃ§Ã£o em flutter utilizando uma Bottom navigation bar Como podem ver aqui e o comportamento que se pretende Ã© este que estÃ£o aqui a ver antes de avanÃ§ar para a implementaÃ§Ã£o vou vos mostrar em termos de Diagrama como Ã© que isto vai funcionar vamos ter uma um widget chamado Main page que vai ser responsÃ¡vel por gerir a navigation Bar ou seja ele aqui no meio nÃ£o vai ter nada ele vai trocando o que estÃ¡ aqui no meio Ã  medida que a gente vai carregando aqui portanto a responsabilidade dele Ã© apenas criar esta navigation bar e garantir que quando nÃ³s trocamos quando carregamos aqui no page um no page do o que estÃ¡ aqui no meio Ã© trocado e o que Ã© que estÃ¡ aqui no meio sÃ£o widgets neste caso por exemplo o page 1 que inclusivamente inclui uma app bar porque a gente quer que o tÃ­tulo mude consoante a gente carrega no page 1 ou no page 2 portanto toda esta zona a verde serÃ¡ respons possibilidade do widget interior Se quiserem e a m page a Ãºnica coisa que faz Ã© ir trocando o page um com o Page do consoante se vai clicando num e n outro dito isto vamos entÃ£o avanÃ§ar para a implementaÃ§Ã£o vou comeÃ§ar por alterar aqui este anÃ¡lis option sÃ³ para ele nÃ£o chatear muito com warnings que nesta fase nÃ£o sÃ£o muito importantes atrasam um bocadinho o desenvolvimento pronto vamos entÃ£o ao cÃ³digo propriamente dito este Main Ã© o Main que Ã© gerado automaticamente quando queremos um projeto flutter e eu vou jÃ¡ comeÃ§ar por eliminar aqui este esta parte isto jÃ¡ lavamos vou criar aqui uma pasta para isto ficar mais organizado chamada pages e vou jÃ¡ criar aqui trÃªs widgets que vÃ£o ser a Main page vou criar aqui com o stls Main page Ok importar e vou duplicar isto page um page 2 e vamos aqui mudar isto P um e pronto temos EntÃ£o os nossos trÃªs wis aqui criados agora para facilitar a futura manutenÃ§Ã£o desta aplicaÃ§Ã£o no sentido de que poderÃ£o vir a ser necessÃ¡rias mais pÃ¡ginas nÃ³s neste momento temos sÃ³ duas mas Imaginem que mais tarde Ã© necessÃ¡rio quear uma terceira ou uma quarta ou queremos facilmente mudar o nome da pÃ¡gina ou o icon que estÃ¡ associado Vamos criar aqui um quarto ficheiro chamado pages e lÃ¡ dentro vamos criar uma estrutura neste caso Ã© uma lista de tupos que vÃ£o representar a informaÃ§Ã£o de cada pÃ¡gina o que Ã© que Ã© um tuplo um tuplo Ã© o equivalente a uma classe quiserem no sentido em que agreg em vÃ¡rias vÃ¡rias informaÃ§Ãµes no Ãºnico objeto mas que eu nÃ£o preciso criar uma classe sÃ³ para isso eu uso o parÃªnteses e lÃ¡ dentro posso ir criando atributos que acrescenta ao tuplo e depois mais tarde posso aceder como se fosse uma classe neste caso Quais sÃ£o os atributos que eu quero para cada pÃ¡gina obviamente quero um title neste caso vai ser page um quero um icon que vai ser neste caso icons ortar isto thumb up e finalmente quero um widget que representa qual Ã© o widget que vai ser responsÃ¡vel por desenhar essa pÃ¡gina neste caso Ã© o page 1 importar que foi o widget que a gente jÃ¡ criou agora vamos fazer o mesmo para a pÃ¡gina dois e agora vamos entÃ£o comeÃ§ar a alterar isto vou jÃ¡ aqui corrigir o meu Main isto agora Ã© Main page nÃ£o tem tÃ­tulo jÃ¡ que aqui estamos vou sÃ³ mudar aqui o title e importar isto pronto para jÃ¡ isto ainda nÃ£o faz nada Nem vale a pena correr vamos entÃ£o olhar aqui se calhar primeiro para o page 1 e para o page 2 antes de olharmos para o m page na realidade eu basta-me construir o page 1 e depois Ã© quase um copy paste para o Page do porque eles neste momento sÃ£o iguais entÃ£o eu vou querer em vez deste placeholder vou criar aqui vou querer usar um scaffold para ter um app bar um app bar Ã© este tÃ­tulo que estamos aqui que temos aqui ok vamos colocar aqui este app bar vamos dizer que o title Ã© text e agora podÃ­amos criar aqui apenas pades um mas jÃ¡ que temos essa informaÃ§Ã£o nesta estrutura devemos usÃ¡-la porque assim temos um Ãºnico sÃ­tio onde alteramos e fica refletido logo em toda a aplicaÃ§Ã£o EntÃ£o isto vai passar a ser pages que Ã© a minha variÃ¡vel Global vamos importÃ¡-la na posiÃ§Ã£o zero portanto aquela lista na posiÃ§Ã£o zero ponto title assim eu tenho a certeza que se mudar aqui Ã© ela depois vai mudar ali tambÃ©m se eu mudar este tÃ­tulo ela vai mudar logo vai mudar aqui vai mudar aqui portanto fica tudo refletido continuando no Body vamos comeÃ§ar pelo texto com o mesmo a mesma situaÃ§Ã£o que Ã© este title vamos copiÃ¡-lo para aqui Claro que isto apenas vai mostrar o tÃ­tulo Portanto o que a gente quer Ã© basicamente criar aqui um widget do tipo coluna que Ã© para organizar isto de forma vertical com um icon e um texto EntÃ£o vamos fazer um wrap disto numa coluna e vamos colocar aqui um icon e agora pages 0 ponto icon para jÃ¡ fica assim e eu ainda nÃ£o vou e copiar isto para o pides dois porque ainda quero afinar isto isto provavelmente ainda nÃ£o estÃ¡ com o aspeto que eu quero portanto nÃ£o vamos para jÃ¡ preocuparnos com isto agora vou voltar aqui ao Main page entÃ£o para comeÃ§ar a implementar aqui a Bottom navigation bar tambÃ©m aqui vou criar um scaffold sÃ³ que este scaffold nÃ£o vai ter AB bar Isto Ã© muito importante eu jÃ¡ mostrei hÃ¡ bocado o que que acontece na Main page ele apenas Ã© responsÃ¡vel por criar esta parte esta parte fica a responsabilidade de cada uma das pÃ¡ginas interiores precisamente porque o app bar vai mudar conso a gente seleciona um ou outro portanto ela nÃ£o vai ter app bar vai ter e diretamente um body que neste momento a gente vai dizer que Ã© igual ao page 1 Ok vamos aqui importar e acho que podemos jÃ¡ correr isto para comeÃ§ar a afinar aqui a nossa aplicaÃ§Ã£o cÃ¡ estÃ¡ nÃ£o tÃ¡ com aspeto Espetacular vamos agora melhorar aqui o pum para jÃ¡ isto deve estar centrado Portanto vamos e fazer um Wap com Center e o que ele faz Ã© centrar apenas horizontalmente para centrar verticalmente esta coluna A gente vai usar aqui o Main Axis alignment e dizer que Ã© Center Ok jÃ¡ estÃ¡ centrado e agora vamos aumentar se calhar um bocadinho o tamanho do icon e do texto aqui no icon Ã© sÃ³ fazer size igual a vou pÃ´r 100 tamanho relativamente grande aqui no texto temos que usar o Style e depois criar um texto Style com um Font size por exemplo de 30 ok vou sÃ³ tirar aqui tirar esta vÃ­rgula e esta vÃ­rgula e desta forma se eu agora formatar Isto fica assim mais compacto gosto mais assim e agora falta-nos sÃ³ aqui este app bar que eu nÃ£o estou a gostar muito por ele nÃ£o ter uma cor de fundo nÃ³s podÃ­amos alterar isso aqui diretamente Mas a forma mais correta de fazer Ã© atravÃ©s do tema todas as aplicaÃ§Ãµes flutter TM um tema associado aqui estÃ¡ ele e nÃ³s podemos diretamente neste tema mudar logo a cor de todos os app Bars que aparecerem na nossa aplicaÃ§Ã£o e essa Ã© a forma mais correta entÃ£o para o fazer vou comeÃ§ar por extrair este color skem para uma variÃ¡vel vou-lhe chamar color skem e a seguir vou preencher uma uma propriedade chamada appb team em que que eu a partir de o do app bar que existe neste momento eu copio e coloco o background color igual Ã  cor primÃ¡ria de do deste color skem e o foreground Color igual ao background color deste e color skem tenho aqui tambÃ©m o Center title true mas eu atÃ© Vou tirar isso e agora jÃ¡ temos nosso app bar na cor correta temos entÃ£o digamos a nossa aplicaÃ§Ã£o em termos da pÃ¡gina feita eu agora atÃ© podia copiar isto jÃ¡ para a pÃ¡gina dois tudo isto importar isto aqui passa a ser um obviamente notem que nÃ£o Ã© nada bom eu ter cÃ³digo duplicado ou seja este page 1 e page 2 da forma como estÃ£o neste momento atÃ© deveriam ser uma Ãºnico widget para o qual Eu por exemplo passava atravÃ©s do Construtor qual era a posiÃ§Ã£o dentro do pages no entanto no mundo real eu raramente tenho duas pÃ¡ginas iguais na na navigation bar nÃ£o Ã© feito este esta ressalva Vamos entÃ£o implementar o nosso Bottom navigation bar o scaffold tem uma propriedade chamada Bottom navigation bar e a gente pode logo preencher isto com um objeto do tipo navigation bar que agora vamos ter que inicializar Ok para jÃ¡ ele diz-me que precisa de um destinations que Ã© basicamente Quais sÃ£o os destinos possÃ­veis de navegaÃ§Ã£o neste caso Quais sÃ£o as pÃ¡ginas que vÃ£o aparecer na navigation bar o que ela recebe Ã© uma lista de navigation Destination e agora eu tenho que converter basicamente as minhas pÃ¡ginas que aqui estÃ£o para navigation Destination para isso eu vou usar o map e como alguns de vocÃªs poderÃ£o nÃ£o estar familiarizados com essa instruÃ§Ã£o eu vou sÃ³ aqui muito rapidamente mostrar como Ã© que ela funciona a instruÃ§Ã£o que vos quero falar Ã© o map esta instru sÃ£o existem Dart mas tambÃ©m existe uma sÃ©rie de linguagens e o objetivo dela Ã© transformar os elementos de uma lista noutros elementos ou seja aplicar uma transformaÃ§Ã£o a cada elemento de uma lista de forma que a lista resultante tenha o mesmo nÃºmero de elementos da lista original mas com alguma transformaÃ§Ã£o aplicada vamos ver um exemplo concreto muito simples se eu quiser transformar esta lista de inteiros numa outra lista em que cada inteiro Ã© o inteiro original mais um entÃ£o eu aplico este lambda que estÃ£o aqui a ver ou seja para cada inteiro eu somo mais um nÃ£o Ã© obrigatÃ³rio a lista destino ter o mesmo tipo de elementos da lista origem neste caso uma lista de inteiros deu origem a uma lista de inteiros Mas pode dar origem a uma lista de outros objetos quaisquer por exemplo eu estou a transformar quadrados em cÃ­rculos para indicar que estou a transformar mesmo o tipo da dos elementos da lista e neste caso eu estou a transformar uma lista de inteiros numa lista de Strings em que me limito no lambda a converter um inteiro na sua representaÃ§Ã£o sobre formato string Isto Ã© o que nos interessa mais para o caso concreto que temos aqui nesta aplicaÃ§Ã£o que Ã© nÃ³s queremos transformar uma lista de tupos com esta estrutura widget icon Label numa lista de objetos do tipo navigation Destination que por sua vez vÃ£o ter um icon e uma Label obviamente Tem que haver uma relaÃ§Ã£o entre isto e isto como Ã© que eu vou fazer isso com este lambda muito simples Eu recebo um p que eu neste caso Ã© uma entrada uma page Se quiserem Ã© um tuplo para cada tuplo que aqui estÃ¡ ele vai parar ao p e depois eu vou criar um navigation Destination baseado nesse p como o icon Ã© o p pon icon ou seja este icon que tÃ¡ aqui e a Label Ã© o p p Label ou seja esta Label que estÃ¡ aqui e portanto atravÃ©s deste map eu consigo fazer esta transformaÃ§Ã£o com uma Ãºnica linha Vamos entÃ£o aplicar esse sty map aqui precisamente neste destinations em vez de comeÃ§amos a criar uma lista Ã  mÃ£o vamos simplesmente pegar no pages que Ã© aquela variÃ¡vel global que criamos aqui neste ficheiro importÃ¡-la e vamos aplicar o map precisamente a essa variÃ¡vel vai ser aquele que jÃ¡ tÃ­nhamos visto eu aqui usei page em vez de p Mas Ã© a mesma coisa e temos que no final fazer um to list porque aquilo que Ã© devolv pelo map nÃ£o Ã© aceito diretamente aqui pelo destinations isto jÃ¡ nos vai aparecer uma Bottom bar mas ela ainda nÃ£o vai estar a funcionar reparem que ela nÃ£o funciona ainda a seguiro temos outro parÃ¢metro muito importante na navigation bar que Ã© o selected index Isto Ã© um inteiro que indica Qual Ã© a posiÃ§Ã£o na Bottom bar que deve estar selecionada quando nÃ³s arrancamos a aplicaÃ§Ã£o neste caso que seria o zero Ok mas a gente quer que isto vÃ¡ mudando consoante ele clica aqui ou aqui isto deve mudar o selected index portanto nÃ³s vamos criar aqui uma variÃ¡vel selected index que vamos inicializar a zero e Ã© aqui que a gente vai colocar esta variÃ¡vel isto nÃ£o pode ser conste agora que temos isto ah falta aqui agora tirar tambÃ©m daqui o conste e agora com esta alteraÃ§Ã£o continua a nÃ£o funcionar o que Ã© que falta ainda alterar aqui Ã© preciso Ã  mudanÃ§a de pÃ¡gina aqui no este cli Se quiserem aqui na Bottom navigation bar para isso eu vou preencher este On Destination selected que Ã© basicamente uma funÃ§Ã£o que Ã© chamada cada vez que eu carrego aqui numa destas opÃ§Ãµes e ela passa Qual Ã© o Ã­ndice neste caso ou zer ou 1 que foi selecionado digamos assim e com isso eu vou alterar o selected index isto continua a nÃ£o funcionar e os mais atentos de vocÃªs jÃ¡ saberÃ£o porquÃª porque este widget Ã© stateless ou seja ele Ã© desenhado uma vez e depois nunca mais Ã© desenhado e eu tenho que o desenhar novamente de cada vez que carreg no page um ou no PS dois ou seja este selected tem que provocar um novo build deste widget EntÃ£o a primeira coisa que eu tenho que fazer Ã© converteu para stateful widget para isso basta-me fazer aqui Alt enter e ele converte para set widget mas ainda nÃ£o Ã© suficiente eu vou ter que encapsular esta alteraÃ§Ã£o dentro de um set state para que ele perceba que tem que refrescar o ecrÃ£ e chamar novamente o build vamos tirar isto aqui vamos converter isto para uma expressÃ£o e agora sim agora sim isto devia funcionar porque Ã© que nÃ£o funciona porque nos estamos a esquecer aqui de uma coisa nÃ³s deixamos aqui no body fixo o page 1 agora a Body tem que tirar partir do selected Index para mostrar o widget correto ou seja vamos novamente recolher a nossa variÃ¡vel pages no selected index ou seja a pÃ¡gina que neste momento estÃ¡ selecionada e vamos buscar o widget e agora sim isto passa a funcionar
